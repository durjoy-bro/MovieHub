<!doctype html>

<html lang="bn">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Snake Game — সুন্দর সাপ খেলা</title>
  <style>
    :root{--bg:#0f172a;--panel:#0b1220;--accent:#10b981;--muted:#94a3b8}
    *{box-sizing:border-box;font-family:Inter,system-ui,Segoe UI,Arial}
    html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg),#071020);color:#e6eef8}
    .wrap{min-height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:24px}
    .game-card{background:linear-gradient(180deg,rgba(255,255,255,0.03),rgba(0,0,0,0.06));padding:18px;border-radius:14px;box-shadow:0 8px 30px rgba(2,6,23,0.6);max-width:920px;width:100%;display:grid;grid-template-columns:1fr 260px;gap:16px}
    canvas{background:linear-gradient(180deg,#0b1626,#07111a);border-radius:8px;width:100%;height:100%;display:block}
    .panel{padding:12px;background:rgba(255,255,255,0.02);border-radius:10px}
    h1{margin:0 0 8px;font-size:20px}
    .meta{display:flex;gap:8px;align-items:center;margin-bottom:12px}
    .score{font-weight:700;color:var(--accent)}
    .controls{display:grid;gap:8px}
    button{appearance:none;border:0;background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(0,0,0,0.05));padding:8px 10px;border-radius:8px;color:inherit;cursor:pointer}
    .btn-primary{background:linear-gradient(180deg,var(--accent),#059669);color:#001b12}
    .small{font-size:13px;color:var(--muted)}
    .kbd{display:inline-block;padding:4px 8px;border-radius:6px;background:rgba(255,255,255,0.03);font-weight:700}
    .footer{font-size:12px;color:var(--muted);margin-top:10px}
    /* mobile touch buttons */
    .touch-pad{display:none;gap:8px;justify-content:center;margin-top:12px}
    .touch-pad button{width:52px;height:52px;border-radius:12px;font-weight:700}
    @media(max-width:880px){.game-card{grid-template-columns:1fr;}
      .touch-pad{display:flex}}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="game-card">
      <div>
        <canvas id="game" width="640" height="480"></canvas>
      </div><div class="panel">
    <h1>Snake (সাপ খেলা)</h1>
    <div class="meta">
      <div>স্কোর: <span id="score" class="score">0</span></div>
      <div style="margin-left:auto" class="small">লেভেল: <span id="level">1</span></div>
    </div>

    <div class="controls">
      <div style="display:flex;gap:8px">
        <button id="start" class="btn-primary">শুরু / রিস্টার্ট</button>
        <button id="pause">পজ/রিজিউম</button>
      </div>

      <div class="small">নিয়ন্ত্রণ: <span class="kbd">↑ ↓ ← →</span> অথবা ওয়াস্ড</div>
      <div class="small">উদ্দেশ্য: খাবার খেয়ে যতটা সম্ভব লম্বা হওয়া। নিজের শরীর বা দেয়ালকে ছোঁলে খেলা শেষ।</div>

      <div style="display:flex;gap:8px;margin-top:8px;align-items:center">
        <label class="small">সপিড: </label>
        <input id="speed" type="range" min="4" max="16" value="8" />
        <div id="speed-val" class="small">8</div>
      </div>

      <div style="margin-top:8px">
        <div class="small">টাচ স্ক্রীন ব্যবহারকারীর জন্য বাটন:</div>
        <div class="touch-pad" id="touchPad">
          <button id="t-up">↑</button>
        </div>
        <div class="touch-pad" style="margin-top:6px">
          <button id="t-left">←</button>
          <button id="t-down">↓</button>
          <button id="t-right">→</button>
        </div>
      </div>

      <div class="footer">ডেভ: ChatGPT • Press <span class="kbd">Space</span> to pause. Tried & simple.</div>
    </div>
  </div>
</div>

  </div>  <script>
    /* Simple Snake Game
       - Arrow keys / WASD
       - Touch buttons for mobile
       - Adjustable speed
    */

    const canvas = document.getElementById('game');
    const ctx = canvas.getContext('2d');
    const scoreEl = document.getElementById('score');
    const levelEl = document.getElementById('level');
    const startBtn = document.getElementById('start');
    const pauseBtn = document.getElementById('pause');
    const speedRange = document.getElementById('speed');
    const speedVal = document.getElementById('speed-val');

    // game config
    const GRID = 20; // size of a cell in pixels
    let cols = Math.floor(canvas.width / GRID);
    let rows = Math.floor(canvas.height / GRID);

    // state
    let snake, dir, food, score, level, running, paused, tickInterval, speed;

    function reset(){
      cols = Math.floor(canvas.width / GRID);
      rows = Math.floor(canvas.height / GRID);
      snake = [ {x: Math.floor(cols/2), y: Math.floor(rows/2)} ];
      dir = {x:1,y:0};
      placeFood();
      score = 0; level=1; running=false; paused=false;
      updateUI();
    }

    function placeFood(){
      while(true){
        const x = Math.floor(Math.random()*cols);
        const y = Math.floor(Math.random()*rows);
        if(!snake.some(s=>s.x===x && s.y===y)){
          food = {x,y};
          break;
        }
      }
    }

    function updateUI(){
      scoreEl.textContent = score;
      levelEl.textContent = level;
    }

    function draw(){
      // background
      ctx.clearRect(0,0,canvas.width,canvas.height);
      // grid subtle
      ctx.strokeStyle = 'rgba(255,255,255,0.02)';
      for(let i=0;i<=cols;i++) ctx.strokeRect(i*GRID,0,0,canvas.height);
      for(let j=0;j<=rows;j++) ctx.strokeRect(0,j*GRID,canvas.width,0);

      // food
      drawRect(food.x, food.y, GRID, '#ff4d6d');

      // snake
      for(let i=snake.length-1;i>=0;i--){
        const s = snake[i];
        const alpha = 0.25 + 0.75*(i / snake.length);
        drawRect(s.x, s.y, GRID, `rgba(16,185,129,${alpha})`, true);
      }
    }

    function drawRect(cx,cy,size,fill,stroke=false){
      const x = cx*size;
      const y = cy*size;
      ctx.fillStyle = fill;
      ctx.fillRect(x+1,y+1,size-2,size-2);
      if(stroke){
        ctx.strokeStyle = 'rgba(0,0,0,0.25)';
        ctx.strokeRect(x+1,y+1,size-2,size-2);
      }
    }

    function step(){
      if(paused) return;
      const head = {x: (snake[0].x + dir.x), y: (snake[0].y + dir.y)};

      // wall collision -> game over
      if(head.x<0 || head.x>=cols || head.y<0 || head.y>=rows){
        gameOver(); return;
      }

      // self collision
      if(snake.some(s=>s.x===head.x && s.y===head.y)){
        gameOver(); return;
      }

      snake.unshift(head);

      // ate food?
      if(head.x===food.x && head.y===food.y){
        score += 10;
        if(score % 50 === 0) level = Math.min(10, level+1);
        placeFood();
        updateUI();
        adjustSpeed();
      } else {
        snake.pop();
      }

      draw();
    }

    function gameOver(){
      running=false; clearInterval(tickInterval);
      ctx.fillStyle = 'rgba(0,0,0,0.5)';
      ctx.fillRect(0, canvas.height/2-48, canvas.width, 96);
      ctx.fillStyle = '#fff';
      ctx.textAlign = 'center';
      ctx.font = '24px sans-serif';
      ctx.fillText('Game Over — পুনরায় শুরু করতে Start চাপুন', canvas.width/2, canvas.height/2+8);
    }

    function start(){
      if(running) { reset(); }
      running=true; paused=false;
      adjustSpeed();
      if(tickInterval) clearInterval(tickInterval);
      tickInterval = setInterval(step, 1000 / speed);
    }

    function adjustSpeed(){
      // speed control (cells per second)
      const base = parseInt(speedRange.value,10) || 8;
      speed = base + Math.floor((level-1)/1.5);
      speedVal.textContent = base;
      if(running){
        clearInterval(tickInterval);
        tickInterval = setInterval(step, 1000 / speed);
      }
    }

    function togglePause(){
      if(!running) return;
      paused = !paused;
      pauseBtn.textContent = paused ? 'Resume' : 'পজ/রিজিউম';
    }

    // keyboard
    window.addEventListener('keydown', e => {
      const key = e.key.toLowerCase();
      if(['arrowup','w'].includes(key)) setDir(0,-1);
      if(['arrowdown','s'].includes(key)) setDir(0,1);
      if(['arrowleft','a'].includes(key)) setDir(-1,0);
      if(['arrowright','d'].includes(key)) setDir(1,0);
      if(key===' '){ e.preventDefault(); togglePause(); }
      if(key==='r'){ reset(); start(); }
    });

    function setDir(x,y){
      // prevent reversing
      if(snake.length>1 && snake[0].x + x === snake[1].x && snake[0].y + y === snake[1].y) return;
      dir = {x,y};
    }

    // touch controls
    document.getElementById('t-up').addEventListener('click', ()=> setDir(0,-1));
    document.getElementById('t-down').addEventListener('click', ()=> setDir(0,1));
    document.getElementById('t-left').addEventListener('click', ()=> setDir(-1,0));
    document.getElementById('t-right').addEventListener('click', ()=> setDir(1,0));

    // UI events
    startBtn.addEventListener('click', ()=> { reset(); start(); });
    pauseBtn.addEventListener('click', ()=> togglePause());
    speedRange.addEventListener('input', ()=> adjustSpeed());

    // resize handling
    function fitCanvas(){
      // keep the canvas size but adapt columns/rows
      canvas.width = Math.floor(Math.min(window.innerWidth-120, 800) / GRID) * GRID;
      canvas.height = Math.floor(Math.min(window.innerHeight-180, 560) / GRID) * GRID;
      cols = Math.floor(canvas.width/GRID);
      rows = Math.floor(canvas.height/GRID);
      draw();
    }
    window.addEventListener('resize', fitCanvas);

    // init
    reset();
    fitCanvas();
    // draw initial frame
    draw();

  </script></body>
</html>
